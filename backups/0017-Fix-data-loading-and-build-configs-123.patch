From c03992339b738a6260674822b51fd450b1f3463f Mon Sep 17 00:00:00 2001
From: Willie Randolph <RazzleberryT@gmail.com>
Date: Fri, 18 Jul 2025 23:59:21 -0400
Subject: [PATCH 17/27] Fix data loading and build configs (#123)

---
 package-lock.json                        | 21 +++++++++++++--------
 package.json                             |  3 +++
 postcss.config.js => postcss.config.mjs  |  3 +--
 src/hooks/useHerbs.ts                    | 18 ++++++++----------
 tailwind.config.ts => tailwind.config.js |  3 +--
 5 files changed, 26 insertions(+), 22 deletions(-)
 rename postcss.config.js => postcss.config.mjs (61%)
 rename tailwind.config.ts => tailwind.config.js (96%)

diff --git a/package-lock.json b/package-lock.json
index 01ab9cc..cd44c96 100644
--- a/package-lock.json
+++ b/package-lock.json
@@ -12,6 +12,8 @@
         "@tsparticles/react": "^3.0.0",
         "autoprefixer": "^10.4.19",
         "clsx": "^2.1.1",
+        "dlv": "1.0.0",
+        "extend": "^3.0.2",
         "framer-motion": "^10.16.1",
         "fuse.js": "^7.1.0",
         "gh-pages": "^6.3.0",
@@ -24,6 +26,7 @@
         "react-router-dom": "^6.22.3",
         "react-tooltip": "^5.20.0",
         "tailwindcss": "^3.4.3",
+        "ts-interface-checker": "^0.1.13",
         "tsparticles": "^3.8.1"
       },
       "devDependencies": {
@@ -2082,10 +2085,9 @@
       }
     },
     "node_modules/dlv": {
-      "version": "1.1.3",
-      "resolved": "https://registry.npmjs.org/dlv/-/dlv-1.1.3.tgz",
-      "integrity": "sha512-+HlytyjlPKnIG8XuRG8WvmBP8xs8P71y+SKKS6ZXWoEgLuePxtDoUEiH7WkdePWrQ5JBpE6aoVqfZfJUQkjXwA==",
-      "license": "MIT"
+      "version": "1.0.0",
+      "resolved": "https://registry.npmjs.org/dlv/-/dlv-1.0.0.tgz",
+      "integrity": "sha512-eFAoXFTMUt7HVTcDE6Jc6NxkCYyy7ohc30caEr2L780sc2L6zLmJ6CKPWWo4ts3svDWUjvl6TY8SNKG6q65ukQ=="
     },
     "node_modules/eastasianwidth": {
       "version": "0.2.0",
@@ -2193,8 +2195,7 @@
     "node_modules/extend": {
       "version": "3.0.2",
       "resolved": "https://registry.npmjs.org/extend/-/extend-3.0.2.tgz",
-      "integrity": "sha512-fjquC59cD7CyW6urNXK0FBufkZcoiGG80wTuPujX590cB5Ttln20E2UB4S/WARVqhXffZl2LNgS+gQdPIIim/g==",
-      "license": "MIT"
+      "integrity": "sha512-fjquC59cD7CyW6urNXK0FBufkZcoiGG80wTuPujX590cB5Ttln20E2UB4S/WARVqhXffZl2LNgS+gQdPIIim/g=="
     },
     "node_modules/extend-shallow": {
       "version": "2.0.1",
@@ -4673,6 +4674,11 @@
         "node": ">=14.0.0"
       }
     },
+    "node_modules/tailwindcss/node_modules/dlv": {
+      "version": "1.1.3",
+      "resolved": "https://registry.npmjs.org/dlv/-/dlv-1.1.3.tgz",
+      "integrity": "sha512-+HlytyjlPKnIG8XuRG8WvmBP8xs8P71y+SKKS6ZXWoEgLuePxtDoUEiH7WkdePWrQ5JBpE6aoVqfZfJUQkjXwA=="
+    },
     "node_modules/tailwindcss/node_modules/glob-parent": {
       "version": "6.0.2",
       "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
@@ -4753,8 +4759,7 @@
     "node_modules/ts-interface-checker": {
       "version": "0.1.13",
       "resolved": "https://registry.npmjs.org/ts-interface-checker/-/ts-interface-checker-0.1.13.tgz",
-      "integrity": "sha512-Y/arvbn+rrz3JCKl9C4kVNfTfSm2/mEp5FSz5EsZSANGPSlQrpRI5M4PKF+mJnE52jOO90PnPSc3Ur3bTQw0gA==",
-      "license": "Apache-2.0"
+      "integrity": "sha512-Y/arvbn+rrz3JCKl9C4kVNfTfSm2/mEp5FSz5EsZSANGPSlQrpRI5M4PKF+mJnE52jOO90PnPSc3Ur3bTQw0gA=="
     },
     "node_modules/tslib": {
       "version": "2.8.1",
diff --git a/package.json b/package.json
index 9077f89..fa97b52 100644
--- a/package.json
+++ b/package.json
@@ -14,6 +14,8 @@
     "@tsparticles/react": "^3.0.0",
     "autoprefixer": "^10.4.19",
     "clsx": "^2.1.1",
+    "dlv": "1.0.0",
+    "extend": "^3.0.2",
     "framer-motion": "^10.16.1",
     "fuse.js": "^7.1.0",
     "gh-pages": "^6.3.0",
@@ -26,6 +28,7 @@
     "react-router-dom": "^6.22.3",
     "react-tooltip": "^5.20.0",
     "tailwindcss": "^3.4.3",
+    "ts-interface-checker": "^0.1.13",
     "tsparticles": "^3.8.1"
   },
   "devDependencies": {
diff --git a/postcss.config.js b/postcss.config.mjs
similarity index 61%
rename from postcss.config.js
rename to postcss.config.mjs
index 4a15258..2aa7205 100644
--- a/postcss.config.js
+++ b/postcss.config.mjs
@@ -1,5 +1,4 @@
-// postcss.config.js
-module.exports = {
+export default {
   plugins: {
     tailwindcss: {},
     autoprefixer: {},
diff --git a/src/hooks/useHerbs.ts b/src/hooks/useHerbs.ts
index 858bedb..da0a9ae 100644
--- a/src/hooks/useHerbs.ts
+++ b/src/hooks/useHerbs.ts
@@ -20,18 +20,16 @@ export function useHerbs(): Herb[] | undefined {
 
   React.useEffect(() => {
     let active = true
-    fetchHerbs('/data/Full200.json')
-      .catch(err => {
-        console.error('Failed to load Full200.json', err)
-        return fetchHerbs('/data/Full79.json')
-      })
-      .then(data => {
+    async function load() {
+      try {
+        const data = await fetchHerbs('/data/Full200.json')
         if (active) setHerbs(data)
-      })
-      .catch(err => {
-        console.error('Failed to load fallback herb data', err)
+      } catch (err) {
+        console.error('Failed to load herb data', err)
         if (active) setHerbs([])
-      })
+      }
+    }
+    load()
     return () => {
       active = false
     }
diff --git a/tailwind.config.ts b/tailwind.config.js
similarity index 96%
rename from tailwind.config.ts
rename to tailwind.config.js
index 92e6199..aac72c9 100644
--- a/tailwind.config.ts
+++ b/tailwind.config.js
@@ -1,6 +1,5 @@
-/* eslint-env node */
 /** @type {import('tailwindcss').Config} */
-export default {
+module.exports = {
   darkMode: 'class',
   content: ['./index.html', './src/**/*.{js,ts,jsx,tsx}'],
   theme: {
-- 
2.43.0

