import{R as i,j as t,T as f,n as S,W as M,m as h,A as k,H as B}from"./main-2853c587.js";import{u as A}from"./useHerbs-c3772861.js";function H(n){return n.length===0?"Your Custom Blend":n.map(l=>l.name.split(" ")[0]).join(" ")+" Fusion"}function T(n){if(!n.length)return"Select herbs to see a summary of the blend.";const o=n.map(a=>a.name).join(", "),l=Array.from(new Set(n.flatMap(a=>a.effects||[]))).join(", ");return`Combines ${o} for effects including ${l}.`}function R({herbs:n,onSave:o}){const l=i.useMemo(()=>H(n),[n]),a=i.useMemo(()=>T(n),[n]),c=i.useMemo(()=>Array.from(new Set(n.flatMap(d=>d.tags||[]))),[n]);return t.jsxs("div",{className:"soft-border-glow bg-psychedelic-gradient/30 rounded-xl p-4 text-white backdrop-blur-md",children:[t.jsx("h2",{className:"mb-2 text-2xl font-bold",children:l}),t.jsx("p",{className:"mb-2 text-sand",children:a}),t.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:c.map(d=>t.jsx(f,{label:d},d))}),n.length>=2&&t.jsx("button",{type:"button",onClick:o,className:"rounded-md bg-space-dark/70 px-3 py-1 text-sm text-sand backdrop-blur-md hover:bg-white/10",children:"Save Blend"})]})}function z(){const n=A(),[o,l]=i.useState(""),[a,c]=i.useState([]),[d,g]=S("savedBlends",[]),b=()=>{const e=n.find(r=>r.name.toLowerCase()===o.toLowerCase()||r.id===o);e&&!a.includes(e.id)&&a.length<5&&c(r=>[...r,e.id]),l("")},j=e=>c(r=>r.filter(m=>m!==e)),y=()=>c([]),v=()=>{const e=n.map(p=>p.id),r=Math.floor(Math.random()*4)+2,m=[];for(;m.length<r&&e.length;){const p=Math.floor(Math.random()*e.length);m.push(e.splice(p,1)[0])}c(m)},s=n.filter(e=>a.includes(e.id)),w=()=>{s.length>=2&&g(e=>[...e,a])},u=i.useMemo(()=>Array.from(new Set(s.flatMap(e=>e.effects||[]))),[s]),x=i.useMemo(()=>Array.from(new Set(s.flatMap(e=>e.tags||[]))),[s]),N=i.useMemo(()=>Array.from(new Set(s.map(e=>e.category))),[s]),C=i.useMemo(()=>s.map(e=>e.contraindications).filter(Boolean).join(" "),[s]);return t.jsxs("div",{className:"relative min-h-screen px-4 pt-20",children:[t.jsxs(M,{children:[t.jsx("title",{children:"Blend Builder - The Hippie Scientist"}),t.jsx("meta",{name:"description",content:"Create custom herbal blends."})]}),t.jsxs("div",{className:"mx-auto max-w-6xl space-y-6",children:[t.jsx(h.h1,{className:"text-gradient text-center text-5xl font-bold",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:"Herb Blend Builder"}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx("input",{list:"herb-list",value:o,onChange:e=>l(e.target.value),placeholder:"Type herb name",className:"rounded-md bg-space-dark/70 px-3 py-2 text-white backdrop-blur-md focus:outline-none"}),t.jsx("datalist",{id:"herb-list",children:n.map(e=>t.jsx("option",{value:e.name},e.id))}),t.jsx("button",{type:"button",onClick:b,className:"tag-pill hover-glow bg-emerald-700/70 text-white",children:"Add Herb"}),t.jsx("button",{type:"button",onClick:y,className:"tag-pill hover-glow bg-rose-700/70 text-white",children:"Clear"}),t.jsx("button",{type:"button",onClick:v,className:"tag-pill hover-glow bg-sky-700/70 text-white",children:"Randomize"})]}),t.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(e=>t.jsx("button",{type:"button",onClick:()=>j(e.id),className:"tag-pill ring-2 ring-emerald-400",children:e.name},e.id))}),t.jsx(R,{herbs:s,onSave:w}),u.length>0&&t.jsxs("div",{className:"space-y-1 text-sand",children:[t.jsxs("p",{children:[t.jsx("strong",{children:"Effects:"})," ",u.join(", ")]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Categories:"})," ",N.join(", ")]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Contraindications:"})," ",C||"None"]}),x.length>0&&t.jsx("div",{className:"flex flex-wrap gap-1",children:x.map(e=>t.jsx(f,{label:e},e))})]}),t.jsx(k,{children:s.map(e=>t.jsx(h.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:t.jsx(B,{herb:e})},e.id))})]})]})}export{z as default};
