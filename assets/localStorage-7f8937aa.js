import{n as f,R as m,v as h,j as n,m as p,g as v,h as b}from"./main-564c057a.js";import{H as w}from"./HerbList-93d28737.js";import{m as y}from"./useFilteredHerbs-217ed345.js";function S({herbs:s}){const[t,o]=f("hs-active-tags",[]),g=m.useMemo(()=>{const r=s.reduce((c,u)=>c.concat(u.tags||[]),[]);return Array.from(new Set(r.map(h)))},[s]),a=r=>{o(c=>c.includes(r)?c.filter(u=>u!==r):[...c,r])},i=()=>o([]),d=m.useMemo(()=>t.length===0?s:s.filter(r=>{var c;return(c=r.tags)==null?void 0:c.some(u=>t.includes(h(u)))}),[s,t]),e={hidden:{},visible:{transition:{staggerChildren:.05}}},l={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}};return n.jsxs(n.Fragment,{children:[n.jsxs(p.div,{variants:e,initial:"hidden",animate:"visible",className:"no-scrollbar flex gap-2 overflow-x-auto py-2",children:[g.map(r=>{const c=t.includes(r);return n.jsx(p.button,{variants:l,type:"button",onClick:()=>a(r),whileTap:{scale:.9},whileHover:{scale:1.08},animate:c?{scale:[1,1.15,1],boxShadow:"0 0 8px rgba(16,185,129,0.8)"}:{scale:1,boxShadow:"none"},transition:{type:"spring",stiffness:220,damping:12},className:`tag-pill hover-glow whitespace-nowrap transition-colors duration-300 ${c?"bg-emerald-700/70 text-white ring-2 ring-emerald-400 dark:bg-emerald-800":"bg-space-dark/70 text-sand dark:bg-gray-800 dark:text-gray-200"}`,children:v(r)},r)}),t.length>0&&n.jsx(p.button,{type:"button",onClick:i,whileTap:{scale:.9},whileHover:{scale:1.08},transition:{type:"spring",stiffness:220,damping:12},className:"tag-pill hover-glow whitespace-nowrap bg-rose-700/70 text-white dark:bg-rose-800 transition-colors duration-300",children:"Clear All"})]}),n.jsx(w,{herbs:d})]})}const x=5;function M(){const s=m.useMemo(()=>{const e={};return b.forEach(l=>{const r=l.category.split("/")[0].trim();e[r]=(e[r]||0)+1}),e},[]),t=m.useMemo(()=>Object.entries(s).sort((e,l)=>l[1]-e[1]),[s]),[o,g]=m.useState(!1),a=m.useMemo(()=>o?t:t.filter(([,e])=>e>=x),[t,o]),i=m.useMemo(()=>t.some(([,e])=>e<x),[t]),d=Math.max(...t.map(([,e])=>e));return n.jsxs("div",{className:"relative space-y-2",onMouseEnter:()=>g(!0),onMouseLeave:()=>g(!1),children:[a.map(([e,l])=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"w-40 text-sm",children:e}),n.jsx("div",{className:"flex-1 h-2 rounded bg-gray-200 dark:bg-gray-700 transition-colors duration-300",children:n.jsx("div",{className:"h-2 rounded bg-pink-500 dark:bg-pink-400 transition-colors duration-300",style:{width:`${l/d*100}%`}})}),n.jsx("span",{className:"text-sm",children:l})]},e)),i&&!o&&n.jsx("div",{className:"pointer-events-none text-center text-xs text-moss",children:"Hover to show more"})]})}function T({selected:s,onChange:t}){const o=m.useMemo(()=>{const a={};return b.forEach(i=>{const d=y(i.category);a[d]=(a[d]||0)+1}),a},[]),g=a=>{const i=s.includes(a)?s.filter(d=>d!==a):[...s,a];t==null||t(i)};return n.jsx("div",{className:"flex flex-wrap gap-2",children:Object.entries(o).sort((a,i)=>i[1]-a[1]).map(([a,i])=>n.jsxs("button",{type:"button",onClick:()=>g(a),className:`tag-pill transition-colors duration-300 ${s.includes(a)?"ring-2 ring-emerald-400 bg-emerald-700/70 text-white dark:bg-emerald-800":"bg-space-dark/70 text-sand dark:bg-gray-800 dark:text-gray-200"}`,children:[a," (",i,")"]},a))})}function C({query:s,setQuery:t,fuse:o}){const[g,a]=m.useState([]);m.useEffect(()=>{const e=s.trim();a(e?o.search(e,{limit:5,isCaseSensitive:!1,ignoreLocation:!0}):[])},[s,o]);const i=e=>{if(!s)return e;const l=s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=new RegExp(`(${l})`,"ig");return e.replace(r,'<span class="font-bold">$1</span>')},d=e=>{const l=[e.item.name,...e.item.altNames||[]].join(", ");return i(l)};return n.jsxs("div",{className:"relative w-full",children:[n.jsx("input",{type:"text",placeholder:"Search herbs...","aria-label":"Search herbs",tabIndex:0,value:s,onChange:e=>t(e.target.value),className:"w-full rounded-md bg-space-dark/70 px-3 py-2 text-white backdrop-blur-md focus:outline-none"}),g.length>0&&n.jsx("ul",{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-black/80 p-2 text-sm text-sand backdrop-blur-md",children:g.map(e=>n.jsx("li",{children:n.jsx("button",{type:"button",tabIndex:0,"aria-label":`Select ${e.item.name}`,className:"w-full text-left rounded px-2 py-1 hover:bg-white/10",onClick:()=>t(e.item.name),dangerouslySetInnerHTML:{__html:d(e)}})},e.item.id))})]})}function $(s,t){try{const o=localStorage.getItem(s);return o?JSON.parse(o):t}catch{return t}}function A(s,t){try{localStorage.setItem(s,JSON.stringify(t))}catch{}}export{T as C,C as S,S as T,M as a,$ as g,A as s};
