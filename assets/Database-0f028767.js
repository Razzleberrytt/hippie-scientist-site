import{r as f,j as e,m as p,R as o,W as j}from"./main-cdc66cbf.js";import{u as b,T as g,c as k,l as w,f as F,h as N,a as S,H as T}from"./herbs-440eb59f.js";import{d as H,t as B,F as E}from"./fuse-3c7d7c98.js";import"./star-9a8d2ccb.js";function z({tags:s,onChange:r,storageKey:c="tagFilters"}){const[l,d]=b(c,[]);f.useEffect(()=>{r==null||r(l)},[l,r]);const m=t=>{d(n=>n.includes(t)?n.filter(x=>x!==t):[...n,t])};return e.jsx("div",{className:"flex flex-wrap gap-2 overflow-x-auto pb-4",children:s.map(t=>e.jsx(p.button,{type:"button",onClick:()=>m(t),whileHover:{scale:1.1},whileTap:{scale:.95},animate:{opacity:l.includes(t)?1:.6},"aria-pressed":l.includes(t),className:"flex-shrink-0 focus:outline-none",children:e.jsx(g,{label:H(t),variant:l.includes(t)?"green":B(t),className:k(l.includes(t)&&"ring-1 ring-emerald-400")})},t))})}function D(){const s=f.useCallback(async r=>{await w(r)},[]);return e.jsx(F,{id:"starfield",init:s,options:{fullScreen:{enable:!0,zIndex:-10},background:{color:"transparent"},particles:{number:{value:100,density:{enable:!0,area:800}},color:{value:["#ffffff","#ffaadf","#c1ffdd"]},size:{value:{min:.5,max:1.5}},move:{enable:!0,speed:.15},opacity:{value:{min:.1,max:.6}}}}})}function M(){const[s]=o.useState(N);return s}function L(){const s=M(),{favorites:r}=S(),[c,l]=b("herbFavoritesOnly",!1),[d,m]=o.useState(""),t=o.useMemo(()=>new E(s,{keys:["name","tags","effects"],threshold:.3}),[s]),[n,x]=o.useState([]),h=o.useMemo(()=>{const a=s.reduce((u,i)=>u.concat(i.tags),[]);return Array.from(new Set(a))},[s]),y=o.useMemo(()=>{let a=s;const u=d.trim();return u&&(a=t.search(u).map(i=>i.item)),n.length&&(a=a.filter(i=>n.every(v=>i.tags.includes(v)))),c&&(a=a.filter(i=>r.includes(i.id))),a},[s,d,n,c,r]);return e.jsxs(e.Fragment,{children:[e.jsxs(j,{children:[e.jsx("title",{children:"Database - The Hippie Scientist"}),e.jsx("meta",{name:"description",content:"Browse herbal entries and expand each to learn more about their effects and usage."})]}),e.jsxs("div",{className:"relative min-h-screen px-4 pt-20",children:[e.jsx(D,{}),e.jsxs("div",{className:"relative mx-auto max-w-3xl",children:[e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-gradient mb-6 text-5xl font-bold",children:"Herb Database"}),e.jsx("p",{className:"mx-auto max-w-3xl text-xl text-gray-300",children:"Explore our collection of herbs. Click any entry to see detailed information."})]}),e.jsxs("div",{className:"sticky top-2 z-10 mb-4 flex items-center gap-2",children:[e.jsx("input",{type:"text",placeholder:"Search herbs...",value:d,onChange:a=>m(a.target.value),className:"flex-1 rounded-md bg-space-dark/70 px-3 py-2 text-white backdrop-blur-md focus:outline-none"}),e.jsx("button",{type:"button",onClick:()=>l(a=>!a),className:"rounded-md bg-space-dark/70 px-3 py-2 text-sm text-yellow-300 backdrop-blur-md hover:bg-white/10",children:c?"All Herbs":"Favorites"})]}),e.jsx(z,{tags:h,onChange:x}),e.jsx(T,{herbs:y})]})]})]})}export{L as default};
