import{j as e,o as A,R as o,W as H,L as v}from"./main-ca9bec1f.js";import{u as M}from"./useHerbs-d597f731.js";import{b as P}from"./compoundData-ce3d2f18.js";import{T as k}from"./TagBadge-ef210f55.js";import{d as y}from"./format-5969a492.js";import{s as x}from"./slugify-386a61cd.js";function u({title:i,link:h,image:m,price:d}){return e.jsxs("a",{href:h,target:"_blank",rel:"noopener noreferrer",className:"flex w-40 flex-col overflow-hidden rounded-lg bg-black/30 backdrop-blur transition hover:shadow-glow",children:[m&&e.jsx("img",{src:m,alt:i,className:"h-24 w-full object-cover"}),e.jsxs("div",{className:"p-2 text-center",children:[e.jsx("h3",{className:"text-sm font-bold text-white",children:i}),d&&e.jsx("p",{className:"text-xs text-sand",children:d}),e.jsx("span",{className:"mt-2 inline-block rounded-md bg-gradient-to-r from-green-700 to-lime-600 px-2 py-1 text-xs text-white",children:"Buy Now"})]})]})}const B={"acacia-confusa":[{title:"Acacia Root Bark 100g",link:"https://example.com/acacia",image:"https://via.placeholder.com/150",price:"$20-30"},{title:"Acacia Powder 1lb",link:"https://example.com/acacia2",image:"https://via.placeholder.com/150",price:"$45-55"}],dmt:[{title:"DMT Reference Material",link:"https://example.com/dmt",image:"https://via.placeholder.com/150",price:"$50+"},{title:"Portable Vapor Kit",link:"https://example.com/dmt-vape",image:"https://via.placeholder.com/150",price:"$80-120"}]};function D(){const[i]=A(),h=i.get("herbs"),m=i.get("compounds"),d=h?h.split(",").map(s=>s.trim()):[],b=m?m.split(",").map(s=>s.trim()):[],p=M(),j=o.useMemo(()=>d.map(s=>p.find(t=>t.id===s)).filter(Boolean),[d,p]),g=o.useMemo(()=>b.map(s=>P.find(t=>x(t.name)===x(s))).filter(Boolean),[b]),f=o.useMemo(()=>[...j.map(s=>({type:"herb",herb:s})),...g.map(s=>({type:"compound",compound:s}))],[j,g]),w=o.useMemo(()=>[{label:"Name",value:s=>{var t,a;return s.type==="herb"?(t=s.herb)==null?void 0:t.name:(a=s.compound)==null?void 0:a.name}},{label:"Effects",value:s=>{var t,a;return s.type==="herb"?(((t=s.herb)==null?void 0:t.effects)||[]).join(", "):(((a=s.compound)==null?void 0:a.tags)||[]).join(", ")}},{label:"Safety",value:s=>{var t;return s.type==="herb"?((t=s.herb)==null?void 0:t.safetyRating)??"":""}},{label:"Active Constituents",value:s=>{var t,a;return s.type==="herb"?(((t=s.herb)==null?void 0:t.activeConstituents)||[]).map(r=>r.name).join(", "):(((a=s.compound)==null?void 0:a.sourceHerbs)||[]).map(r=>{var n;return((n=p.find(l=>l.id===r))==null?void 0:n.name)||r}).join(", ")}}],[p]),N=s=>B[s]||[],C=s=>{var t;if(s.type==="herb"&&s.herb){const a=s.herb,r=N(a.id);return e.jsxs("div",{className:"glass-card flex min-w-[260px] flex-col gap-2 p-4",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:a.name}),a.tags&&e.jsx("div",{className:"flex flex-wrap gap-1",children:a.tags.map(n=>e.jsx(k,{label:y(n)},n))}),a.effects&&e.jsxs("p",{className:"text-xs text-sand",children:["Effects: ",a.effects.join(", ")]}),a.mechanismOfAction&&e.jsxs("p",{className:"text-xs text-sand",children:["MOA: ",a.mechanismOfAction]}),a.preparation&&e.jsxs("p",{className:"text-xs text-sand",children:["Prep: ",a.preparation]}),a.safetyRating&&e.jsxs("p",{className:"text-xs text-sand",children:["Safety: ",a.safetyRating]}),((t=a.activeConstituents)==null?void 0:t.length)>0&&e.jsxs("p",{className:"text-xs text-sand",children:["Compounds:"," ",a.activeConstituents.map((n,l)=>e.jsxs(o.Fragment,{children:[l>0&&", ",e.jsx(v,{to:`/compounds?compound=${x(n.name)}`,className:"underline",children:n.name})]},n.name))]}),e.jsxs("div",{className:"mt-auto flex gap-2 overflow-x-auto pb-1",children:[a.affiliateLink&&e.jsx(u,{title:a.name,link:a.affiliateLink}),r.map(n=>e.jsx(u,{...n},n.link))]})]},a.id)}if(s.type==="compound"&&s.compound){const a=s.compound,r=x(a.name),n=N(r);return e.jsxs("div",{className:"glass-card flex min-w-[260px] flex-col gap-2 p-4",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:a.name}),a.tags&&e.jsx("div",{className:"flex flex-wrap gap-1",children:a.tags.map(l=>e.jsx(k,{label:y(l)},l))}),a.mechanism&&e.jsxs("p",{className:"text-xs text-sand",children:["MOA: ",a.mechanism]}),a.sourceHerbs&&a.sourceHerbs.length>0&&e.jsxs("p",{className:"text-xs text-sand",children:["Herbs:"," ",a.sourceHerbs.map((l,L)=>{const c=p.find(R=>R.id===l);return e.jsxs(o.Fragment,{children:[L>0&&", ",c?e.jsx(v,{to:`/herbs/${c.id}`,className:"underline",children:c.name}):l,(c==null?void 0:c.affiliateLink)&&e.jsx("a",{href:c.affiliateLink,target:"_blank",rel:"noopener noreferrer",className:"ml-1 text-sky-300 underline",children:"Buy Herb"})]},l)})]}),e.jsxs("div",{className:"mt-auto flex gap-2 overflow-x-auto pb-1",children:[a.affiliateLink&&e.jsx(u,{title:a.name,link:a.affiliateLink}),n.map(l=>e.jsx(u,{...l},l.link))]})]},a.name)}return null};return e.jsxs(e.Fragment,{children:[e.jsx(H,{children:e.jsx("title",{children:"Compare - The Hippie Scientist"})}),e.jsxs("div",{className:"min-h-screen px-4 pt-20",children:[e.jsx("h1",{className:"text-gradient mb-6 text-center text-5xl font-bold",children:"Comparison"}),f.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"glass-card w-full table-auto text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left",children:"Field"}),f.map(s=>e.jsx("th",{className:"p-2 text-left",children:s.type==="herb"?s.herb.name:s.compound.name},s.type==="herb"?s.herb.id:x(s.compound.name)))]})}),e.jsx("tbody",{children:w.map(s=>e.jsxs("tr",{className:"border-t border-white/20",children:[e.jsx("td",{className:"p-2 font-semibold text-lime-300",children:s.label}),f.map(t=>e.jsx("td",{className:"p-2",children:s.value(t)||"â€”"},s.label+(t.type==="herb"?t.herb.id:t.compound.name)))]},s.label))})]})}),e.jsx("h2",{className:"mt-6 text-xl font-bold text-white",children:"Products"}),e.jsx("div",{className:"mt-2 grid gap-4 sm:grid-cols-2 md:grid-cols-3",children:f.map(C)})]}):e.jsx("p",{className:"text-sand",children:"Add ?herbs=id1,id2 or ?compounds=name1,name2"})]})]})}export{D as default};
