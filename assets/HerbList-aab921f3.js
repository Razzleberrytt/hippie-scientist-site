import{l as b,r as N,p as k,j as t,m as d,n as h,R as C}from"./main-0a80006b.js";import{d as S,t as H}from"./format-5969a492.js";import{T as p}from"./TagBadge-8cdd78d0.js";import{u as T}from"./useLocalStorage-b85b51a4.js";import{S as I}from"./star-dd770746.js";/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=b("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function R(){const[e,i]=T("herbFavorites",[]);return{favorites:e,toggle:r=>{i(l=>l.includes(r)?l.filter(n=>n!==r):[...l,r])},isFavorite:r=>e.includes(r)}}const F={Oneirogen:"blue","Dissociative / Sedative":"purple","Empathogen / Euphoriant":"pink","Ritual / Visionary":"green",Other:"yellow"},g=3;function $(e){const i=e.toLowerCase();return i.includes("oneirogen")?"from-indigo-700/40 to-purple-700/40":i.includes("ritual")||i.includes("visionary")?"from-green-800/40 to-blue-800/40":i.includes("stimulant")?"from-orange-700/40 to-red-700/40":"from-white/10 to-white/5"}function E(e,i){let a;if(typeof e=="number"&&(a=e),typeof e=="string"){const o=e.toLowerCase();o==="low"?a=1:o==="moderate"?a=3:o==="high"&&(a=5)}if(i&&/severe|danger/i.test(i))return"danger";if(a!=null)return a<=2?"safe":a<=4?"caution":"danger"}function M({herb:e,highlight:i=""}){var f;const[a,o]=N.useState(!1),r=k(),l=!1,n=()=>{localStorage.setItem("focusHerb",e.id),r(`/herb/${e.id}`)},{isFavorite:m,toggle:y}=R(),v=s=>{(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),n())},x=s=>{if(!i)return s;const u=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),j=new RegExp(`(${u})`,"ig");return s.replace(j,'<span class="font-bold text-yellow-300">$1</span>')},w=$(e.category),c=E(e.safetyRating,e.toxicity);return t.jsxs(d.div,{id:e.id,layout:!0,initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},exit:{opacity:0,scale:.9},onClick:n,onKeyDown:v,tabIndex:0,role:"button","aria-expanded":l,whileHover:{scale:1.03,boxShadow:"0 0 20px rgba(255,255,255,0.2)",backgroundColor:"rgba(255,255,255,0.1)"},whileTap:{scale:.97},transition:{layout:{duration:.4,ease:"easeInOut"}},className:`hover-glow card-contrast relative cursor-pointer overflow-hidden rounded-2xl bg-gradient-to-br ${w} border border-white/10 p-4 shadow-lg shadow-black/50 ring-1 ring-white/30 backdrop-blur-lg hover:shadow-psychedelic-pink/40 hover:drop-shadow-2xl focus:outline-none focus-visible:shadow-intense focus-visible:ring-2 focus-visible:ring-psychedelic-pink sm:p-6`,children:[t.jsx(d.span,{initial:{opacity:0,y:-4},whileHover:{opacity:1,y:0},whileTap:{opacity:1,y:0},className:"pointer-events-none absolute right-4 top-2 text-xs text-sand",children:"+ More Info"}),t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[t.jsx("h3",{className:"text-shadow mb-0.5 font-herb text-xl text-white sm:text-2xl",dangerouslySetInnerHTML:{__html:x(e.name)}}),c&&t.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs font-medium shadow ${c==="safe"?"bg-green-700/40 text-green-200 ring-1 ring-green-400/60":c==="caution"?"bg-yellow-700/40 text-yellow-200 ring-1 ring-yellow-400/60":"bg-red-700/40 text-red-200 ring-1 ring-red-500/60"}`,children:c==="safe"?"✅ Safe":c==="caution"?"⚠️ Caution":"☠️ High Risk"})]}),e.scientificName&&t.jsx("p",{className:"mt-0.5 text-xs italic text-sand",dangerouslySetInnerHTML:{__html:x(e.scientificName)}}),t.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-sm text-sand sm:text-base",children:[e.category&&t.jsx(p,{label:e.category,variant:F[e.category]||"purple"}),((f=e.effects)==null?void 0:f.length)>0&&t.jsx("span",{children:e.effects.join(", ")})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{type:"button",onClick:s=>{s.stopPropagation(),y(e.id)},"aria-label":m(e.id)?"Remove favorite":"Add favorite",className:"rounded-md p-1 text-yellow-400 hover:bg-white/10",children:t.jsx(I,{fill:m(e.id)?"currentColor":"none",size:18})}),t.jsx(d.span,{layout:!0,initial:!1,animate:{rotate:0},transition:{duration:.3},className:"text-cyan-200 transition-transform",children:t.jsx(L,{size:18})})]})]}),t.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[(a||e.tags.length<=g?e.tags:e.tags.slice(0,g)).map(s=>t.jsx(p,{label:S(s),variant:H(s),className:""},s)),e.tags.length>g&&t.jsx("button",{type:"button",onClick:s=>{s.stopPropagation(),o(u=>!u)},className:"focus:outline-none",children:t.jsx(p,{label:a?"Show Less":`+${e.tags.length-g} more`,variant:"yellow"})})]}),t.jsx(h,{initial:!1,children:l})]})}const V={hidden:{},visible:{transition:{staggerChildren:.05}}},_={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},A=({herbs:e,highlightQuery:i="",batchSize:a=24})=>{const[o,r]=C.useState(a),l=()=>r(n=>Math.min(n+a,e.length));return e.length===0?t.jsx("p",{className:"text-center text-sand/80",children:"No herbs match your search."}):t.jsxs(t.Fragment,{children:[t.jsx(d.div,{layout:!0,variants:V,initial:"hidden",animate:"visible",className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:t.jsx(h,{children:e.slice(0,o).map(n=>t.jsx(d.div,{variants:_,layout:!0,children:t.jsx(M,{herb:n,highlight:i})},n.id||n.name))})},e.map(n=>n.id).join("-")),o<e.length&&t.jsx("div",{className:"mt-6 text-center",children:t.jsx("button",{type:"button",onClick:l,className:"rounded-md bg-black/30 px-4 py-2 text-sand hover:bg-white/10 backdrop-blur-md",children:"Show More"})})]})},z=A;export{z as H,R as u};
