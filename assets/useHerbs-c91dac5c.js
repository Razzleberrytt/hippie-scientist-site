import{R as s,h as m}from"./main-244ac183.js";function y(){const[i,n]=s.useState([]),[f,c]=s.useState(!0),[u,l]=s.useState(null);return s.useEffect(()=>{let o=!0;async function d(){try{const r=await fetch("/database.json");if(!r.ok)throw new Error(`status ${r.status}`);const a=await r.json();if(!Array.isArray(a))throw new Error("invalid format");const t=new Map;a.filter(e=>e&&typeof e.name=="string").forEach(e=>{e.id&&!t.has(e.id)&&t.set(e.id,e)}),o&&n(Array.from(t.values()))}catch(r){if(console.error("Failed to fetch database",r),o){l(r.message);const a=new Map;m.forEach(t=>{a.has(t.id)||a.set(t.id,t)}),n(Array.from(a.values()))}}finally{o&&c(!1)}}return d(),()=>{o=!1}},[]),s.useEffect(()=>{},[i]),{herbs:i,loading:f,error:u}}export{y as u};
