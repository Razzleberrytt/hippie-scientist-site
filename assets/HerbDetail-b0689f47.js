import{j as e,E as g,k as y,R as d,L as o,W as b,m as N}from"./main-f2b720ca.js";import{a as u,d as k,t as v}from"./herbs-fcbe14bd.js";import{u as w,T as S}from"./useLocalStorage-9bfa7e84.js";import{s as p}from"./slugify-386a61cd.js";import"./herbs.cleaned-6b893687.js";function L(n){return u.map(a=>{if(a.id===n.id)return{h:a,score:-1};let r=0;const l=new Set(a.tags??[]),m=new Set(a.effects||[]);return(n.tags??[]).forEach(s=>{l.has(s)&&(r+=2)}),(n.effects||[]).forEach(s=>{m.has(s)&&(r+=1)}),n.mechanismOfAction&&a.mechanismOfAction&&n.mechanismOfAction===a.mechanismOfAction&&(r+=2),{h:a,score:r}}).sort((a,r)=>r.score-a.score).slice(0,5).filter(a=>a.score>0).map(a=>a.h)}function A(){var x,h;const{id:n}=y(),i=u.find(t=>t.id===n),[a,r]=w(`notes-${n}`,""),[l,m]=d.useState(!1);if(!i||!i.name||!i.effects)return console.warn("Skipping malformed herb:",i),e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("p",{children:"Herb not found."}),e.jsx(o,{to:"/database",className:"text-comet underline",children:"Back to database"})]});const s={...i,name:i.name||"Unknown Herb",effects:Array.isArray(i.effects)?i.effects:[],category:i.category||"Other",slug:i.slug||p(i.name)},f=d.useMemo(()=>L(s),[s]),j=`${s.name} is classified as ${s.category}. Known effects include ${s.effects.join(", ")}.`;return e.jsxs(e.Fragment,{children:[e.jsxs(b,{children:[e.jsxs("title",{children:[s.name," - The Hippie Scientist"]}),s.description&&e.jsx("meta",{name:"description",content:s.description})]}),e.jsxs(N.div,{initial:{opacity:0},animate:{opacity:1},className:"mx-auto max-w-3xl space-y-6 px-6 py-12",children:[e.jsx(o,{to:"/database",className:"text-comet underline",children:"â† Back"}),e.jsx("h1",{className:"text-gradient text-4xl font-bold",children:s.name}),s.scientificName&&e.jsx("p",{className:"italic",children:s.scientificName}),e.jsxs("div",{className:"space-y-2",children:[["description","mechanismOfAction","therapeuticUses","sideEffects","contraindications","drugInteractions","preparation","dosage","pharmacokinetics","onset","duration","intensity","region","legalStatus","safetyRating","toxicity","toxicityLD50"].map(t=>{const c=s[t];return c?e.jsxs("div",{children:[e.jsxs("span",{className:"font-semibold text-lime-300",children:[t.replace(/([A-Z])/g," $1"),":"]})," ",c]},t):null}),((x=s.activeConstituents)==null?void 0:x.length)>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-lime-300",children:"Active Compounds:"})," ",s.activeConstituents.map((t,c)=>e.jsxs(d.Fragment,{children:[c>0&&", ",e.jsx(o,{className:"text-sky-300 underline",to:`/compounds#${p(t.name)}`,children:t.name})]},t.name))]}),s.affiliateLink&&s.affiliateLink.startsWith("http")&&e.jsx("a",{href:s.affiliateLink,target:"_blank",rel:"noopener noreferrer",className:"text-sky-300 underline",children:"Buy Online"}),e.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:(h=s.tags)==null?void 0:h.map(t=>e.jsx(S,{label:k(t),variant:v(t)},t))})]}),e.jsx("button",{type:"button",className:"rounded-md bg-gradient-to-r from-violet-900 to-sky-900 px-3 py-2 text-white hover:opacity-90",onClick:()=>m(t=>!t),children:"ðŸ§  Smart Explore"}),l&&f.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"mt-4 text-2xl font-bold text-sky-300",children:"Similar Herbs"}),e.jsx("ul",{className:"list-inside list-disc",children:f.map(t=>e.jsx("li",{children:e.jsx(o,{className:"text-comet underline",to:`/herbs/${t.id}`,children:t.name})},t.id))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-sky-300",children:"Your Notes"}),e.jsx("textarea",{value:a,onChange:t=>r(t.target.value),className:"mt-2 w-full rounded-md bg-black/20 p-2 text-white",rows:5})]}),e.jsxs("details",{className:"rounded-md bg-slate-800/40 p-4",children:[e.jsx("summary",{className:"cursor-pointer text-sky-300",children:"ðŸ§¬ Summarize This Herb"}),e.jsx("p",{className:"mt-2",children:j})]})]}),s.affiliateLink&&s.affiliateLink.startsWith("http")&&e.jsx("a",{href:s.affiliateLink,target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-4 right-4 z-20 rounded-full bg-gradient-to-r from-violet-600 to-sky-600 px-4 py-3 text-white shadow-lg hover:shadow-xl",children:"Buy Online"})]})}function C(){return e.jsx(g,{children:e.jsx(A,{})})}export{C as default};
