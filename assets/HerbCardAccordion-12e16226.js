import{l as R,r as h,R as T,j as t,m as a,A as P,L as S}from"./main-ee38a6f8.js";import{c as y,d as E,t as I}from"./herbs-7eb8368d.js";import{u as M,T as x,I as O}from"./useLocalStorage-4c5e8321.js";import{s as z}from"./slugify-386a61cd.js";/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=R("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=R("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),K="Unknown",B="Not well documented";function W(){const[i,o]=M("herbFavorites",[]);return{favorites:i,toggle:r=>{o(c=>c.includes(r)?c.filter(p=>p!==r):[...c,r])},isFavorite:r=>i.includes(r)}}const q={Oneirogen:"blue",Dissociative:"purple",Psychedelic:"purple",Empathogen:"pink",Stimulant:"yellow",Other:"yellow"},G={hidden:{},visible:{transition:{staggerChildren:.05}}},d={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},w=5,g={mechanismOfAction:"How this herb produces its effects in the body.",toxicity:"Known adverse effects or poisoning information.",therapeuticUses:"Traditional or potential healing applications.",contraindications:"Situations where this herb should be avoided.",dosage:"Common oral or smoked amount for effects."};function Z(i){const o=i.toLowerCase();return o.includes("oneirogen")?"from-indigo-700/40 to-purple-700/40":o.includes("psychedelic")?"from-fuchsia-700/40 to-pink-700/40":o.includes("dissociative")?"from-purple-700/40 to-violet-700/40":o.includes("empathogen")?"from-rose-700/40 to-pink-600/40":o.includes("stimulant")?"from-orange-700/40 to-amber-700/40":"from-white/10 to-white/5"}function ee({herb:i,highlight:o=""}){var C,L,A;const[l,j]=h.useState(!1),[r,c]=h.useState(!1),[p,D]=h.useState(!1),N=()=>j(e=>!e),{isFavorite:b,toggle:H}=W(),$=e=>{(e.key==="Enter"||e.key===" ")&&(e.preventDefault(),N())},k=e=>{if(!o)return e;const n=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s=new RegExp(`(${n})`,"ig");return e.replace(s,'<span class="font-bold text-yellow-300">$1</span>')},u=T.useMemo(()=>{var s;const e=Array.isArray(i.tags)?i.tags:[],n=new Set(((s=i.activeConstituents)==null?void 0:s.map(m=>y(m.name)))||[]);return[...e].sort((m,v)=>{const f=n.has(y(m)),_=n.has(y(v));return f===_?0:f?-1:1})},[i]),F=Z(((C=i.normalizedCategories)==null?void 0:C[0])||i.category);return t.jsxs(a.article,{id:`herb-${i.id}`,layout:!0,initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},exit:{opacity:0,scale:.9},onClick:N,onKeyDown:$,tabIndex:0,role:"button","aria-expanded":l,"aria-label":`Herb card for ${i.name}`,whileHover:{scale:1.03,boxShadow:"0 0 20px rgba(255,255,255,0.2)",backgroundColor:"rgba(255,255,255,0.1)"},whileTap:{scale:.97},transition:{layout:{duration:.4,ease:"easeInOut"}},className:`hover-glow card-contrast relative cursor-pointer overflow-hidden rounded-2xl bg-gradient-to-br ${F} border border-white/10 p-3 shadow-lg shadow-black/50 ring-1 ring-white/30 backdrop-blur-lg hover:shadow-psychedelic-pink/40 hover:drop-shadow-2xl focus:outline-none focus-visible:shadow-intense focus-visible:ring-2 focus-visible:ring-4 focus-visible:ring-psychedelic-pink focus-visible:ring-sky-400 focus-visible:ring-offset-2 focus-visible:ring-offset-space-dark sm:p-6`,children:[t.jsx(a.span,{initial:{opacity:0,y:-4},whileHover:{opacity:1,y:0},whileTap:{opacity:1,y:0},className:"pointer-events-none absolute right-4 top-2 text-xs text-sand",children:"+ More Info"}),t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"min-w-0",children:[t.jsx("div",{className:"flex flex-wrap items-baseline gap-1",children:t.jsx("h3",{className:"text-shadow mb-0.5 font-herb text-xl text-white sm:text-2xl",dangerouslySetInnerHTML:{__html:k(i.name)}})}),i.scientificName&&t.jsx("p",{className:"mt-0.5 text-xs italic text-sand",dangerouslySetInnerHTML:{__html:k(i.scientificName)}}),((L=i.normalizedCategories)==null?void 0:L.length)>0&&t.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:i.normalizedCategories.slice(0,3).map(e=>t.jsx(x,{label:e,variant:q[e]||"purple"},e))}),t.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-sm text-sand sm:text-base",children:[(()=>{const e=Array.isArray(i.effects)?i.effects.join(", "):i.effects;return e?t.jsx("span",{children:e}):null})(),i.affiliateLink&&t.jsx("a",{href:i.affiliateLink,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"rounded bg-lime-700/40 px-2 py-0.5 text-xs text-lime-200 hover:underline",children:"Buy Online"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{type:"button",onClick:e=>{e.stopPropagation(),H(i.id)},"aria-label":b(i.id)?"Remove favorite":"Add favorite",className:"rounded-md p-1 text-yellow-400 hover:bg-white/10",children:t.jsx(V,{fill:b(i.id)?"currentColor":"none",size:18})}),t.jsx(a.span,{layout:!0,initial:!1,animate:{rotate:l?90:0},transition:{duration:.3},className:"text-cyan-200 transition-transform",children:t.jsx(U,{size:18})})]})]}),t.jsxs(a.div,{layout:!0,onHoverStart:()=>c(!0),onHoverEnd:()=>c(!1),className:"mt-2 flex flex-wrap gap-1 text-xs sm:gap-2 sm:text-sm",children:[(r?u:u.slice(0,w)).map(e=>t.jsx(x,{label:E(e),variant:I(e),className:l?"animate-pulse":""},e)),u.length>w&&!r&&t.jsx(x,{label:`+${u.length-w} more`,variant:"yellow"})]}),t.jsx(P,{initial:!1,children:l&&t.jsx(a.div,{layout:!0,initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.4,ease:"easeInOut"},className:"mt-4 overflow-hidden whitespace-pre-line break-words text-sm text-sand sm:text-base",children:t.jsxs(a.div,{variants:G,initial:"hidden",animate:"visible",exit:"hidden",className:"space-y-3",children:[["description","mechanismOfAction","therapeuticUses","sideEffects","contraindications","drugInteractions","preparation","dosage","pharmacokinetics","onset","duration","intensity","region","legalStatus"].map(e=>{const n=i[e],s=typeof n=="string"&&n.trim()&&n!=="No description provided."?n:e==="mechanismOfAction"||e==="toxicity"||e==="toxicityLD50"?K:B;if(e==="description"){const m=s.slice(0,200);return t.jsxs(a.div,{variants:d,children:[t.jsxs("span",{className:"font-semibold text-lime-300",children:["Description:",g[e]&&t.jsx(O,{text:g[e]})]})," ",p||s.length<=200?s:m+"...",s.length>200&&t.jsx("button",{type:"button",onClick:v=>{v.stopPropagation(),D(f=>!f)},"aria-expanded":p,className:"ml-2 text-sky-300 underline",children:p?"Show Less":"Read More"})]},e)}return t.jsxs(a.div,{variants:d,children:[t.jsxs("span",{className:"font-semibold text-lime-300",children:[e.replace(/([A-Z])/g," $1")+":",g[e]&&t.jsx(O,{text:g[e]})]})," ",s]},e)}),Array.isArray(i.activeConstituents)&&i.activeConstituents.length>0&&t.jsxs(a.div,{variants:d,children:[t.jsx("span",{className:"font-semibold text-lime-300",children:"Active Compounds:"})," ",i.activeConstituents.map((e,n)=>t.jsxs(T.Fragment,{children:[n>0&&", ",t.jsx(S,{to:`/compounds#${z(e.name)}`,onClick:s=>s.stopPropagation(),className:"hover-glow inline-block rounded px-1 text-sky-300 underline",children:e.name})]},e.name))]}),Array.isArray(i.tags)&&i.tags.length>0&&t.jsx(a.div,{variants:d,className:"flex max-h-24 flex-wrap gap-2 overflow-y-auto pt-2 sm:max-h-32",children:i.tags.slice(0,10).map(e=>t.jsx(x,{label:E(e),variant:I(e),className:l?"animate-pulse":""},e))}),(i.safetyRating||i.toxicity||i.toxicityLD50)&&t.jsxs(a.div,{variants:d,className:"space-y-1 pt-2",children:[i.safetyRating&&t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold text-lime-300",children:"Safety Rating:"})," ",t.jsx(x,{label:i.safetyRating,variant:((A=i.safetyRating)==null?void 0:A.toString().toLowerCase())==="low"?"green":"purple"})]}),i.toxicity&&t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold text-lime-300",children:"Toxicity:"})," ",i.toxicity]}),i.toxicityLD50&&t.jsxs("div",{children:[t.jsx("span",{className:"font-semibold text-lime-300",children:"Toxicity LD50:"})," ",i.toxicityLD50]})]}),t.jsxs(a.div,{variants:d,className:"pt-2",children:[t.jsx(S,{to:`/herbs/${i.id}`,onClick:e=>e.stopPropagation(),className:"text-comet underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-psychedelic-pink",children:"View full page"}),i.affiliateLink&&t.jsx("a",{href:i.affiliateLink,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"ml-4 text-sm text-sky-300 underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-psychedelic-pink",children:"üåê Buy Online"})]})]})},"content")})]})}export{ee as H,W as u};
