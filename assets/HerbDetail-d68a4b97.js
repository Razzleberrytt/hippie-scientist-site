import{l as w,R as r,j as e,h as v,L as d,W as k,m as u,A as C}from"./main-b692e03e.js";import{b as S,h as f}from"./compoundData-4198ca33.js";import{s as A,d as $,t as T}from"./format-5969a492.js";import{I as H,T as I}from"./TagBadge-b5137f26.js";import{s as L}from"./slugify-386a61cd.js";import{u as B}from"./useLocalStorage-269895fb.js";/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=w("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);function E({name:i,children:t}){const s=r.useMemo(()=>S.find(l=>l.name.toLowerCase()===i.toLowerCase()),[i]);if(!s)return e.jsx(e.Fragment,{children:t});const n=[s.type,s.mechanism,s.duration&&`Duration: ${s.duration}`,s.toxicity&&`Toxicity: ${s.toxicity}`,s.originHerbs&&s.originHerbs.length>0&&`Sources: ${s.originHerbs.join(", ")}`,s.biosynthesisNotes&&`Bio: ${s.biosynthesisNotes}`].filter(Boolean);return e.jsx(H,{text:n.join(`
`),children:t})}function O(i){return f.map(s=>{if(s.id===i.id)return{h:s,score:-1};let n=0;const l=new Set(s.tags),m=new Set(s.effects||[]);return i.tags.forEach(c=>{l.has(c)&&(n+=2)}),(i.effects||[]).forEach(c=>{m.has(c)&&(n+=1)}),i.mechanismOfAction&&s.mechanismOfAction&&i.mechanismOfAction===s.mechanismOfAction&&(n+=2),{h:s,score:n}}).sort((s,n)=>n.score-s.score).slice(0,5).filter(s=>s.score>0).map(s=>s.h)}function P(){var p;const{id:i}=v(),t=f.find(a=>a.id===i),[s,n]=B(`notes-${i}`,""),[l,m]=r.useState(!1),[c,y]=r.useState(!1),[g,x]=r.useState(!1);r.useEffect(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);const j=()=>{const a=`${window.location.origin}/herb/${t==null?void 0:t.id}`;navigator.clipboard.writeText(a),x(!0),setTimeout(()=>x(!1),1500)};if(!t)return e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("p",{children:"Herb not found."}),e.jsx(d,{to:"/database",className:"text-comet underline",children:"Back to database"})]});const h=r.useMemo(()=>O(t),[t]),b=`${t.name} is classified as ${t.category}. Known effects include ${(t.effects||[]).join(", ")}.`;return e.jsxs(e.Fragment,{children:[e.jsx(k,{children:e.jsxs("title",{children:[t.name," - The Hippie Scientist"]})}),e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},className:"glass-card mx-auto max-w-3xl space-y-6 overflow-y-auto px-6 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(d,{to:"/database",onClick:()=>localStorage.setItem("focusHerb",t.id),className:"text-comet underline",children:"â† Back"}),e.jsxs("div",{className:"relative flex items-center gap-2",children:[e.jsx("button",{type:"button","aria-label":"Copy link",onClick:j,className:"rounded-md p-1 text-sand hover:bg-white/20",children:e.jsx(R,{size:18})}),e.jsx(C,{children:g&&e.jsx(u.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},className:"absolute right-0 top-full mt-1 rounded bg-black/80 px-2 py-1 text-xs text-white",children:"Copied!"})}),e.jsx("a",{href:`https://twitter.com/intent/tweet?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent(t.name)}%20%23herbs`,target:"_blank",rel:"noopener noreferrer",className:"text-sky-300 underline",children:"Tweet"})]})]}),e.jsx("h1",{className:"text-gradient text-4xl font-bold",children:t.name}),t.scientificName&&e.jsx("p",{className:"italic",children:t.scientificName}),e.jsxs("div",{className:"space-y-2",children:[["description","mechanismOfAction","therapeuticUses","sideEffects","contraindications","drugInteractions","preparation","dosage","pharmacokinetics","onset","duration","intensity","region","legalStatus","safetyRating","toxicity","toxicityLD50"].map(a=>{const o=t[a];return o?e.jsxs("div",{children:[e.jsxs("span",{className:"font-semibold text-lime-300",children:[a.replace(/([A-Z])/g," $1"),":"]})," ",a==="safetyRating"?e.jsx("span",{className:A(o),children:o}):o]},a):null}),((p=t.activeConstituents)==null?void 0:p.length)>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-lime-300",children:"Active Compounds:"})," ",(c?t.activeConstituents:t.activeConstituents.slice(0,5)).map((a,o)=>e.jsxs(r.Fragment,{children:[o>0&&", ",e.jsx(E,{name:a.name,children:e.jsx(d,{className:"text-sky-300 underline",to:`/compounds?compound=${L(a.name)}`,children:a.name})})]},a.name)),t.activeConstituents.length>5&&!c&&e.jsxs("button",{type:"button",onClick:()=>y(!0),className:"ml-2 underline",children:["+",t.activeConstituents.length-5," more"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:t.tags.map(a=>e.jsx(I,{label:$(a),variant:T(a)},a))}),t.affiliateLink&&e.jsxs("div",{className:"mt-4 space-y-1",children:[e.jsx("a",{href:t.affiliateLink,target:"_blank",rel:"noopener noreferrer",className:"hover-glow block min-h-[44px] rounded-md bg-gradient-to-r from-green-700 to-lime-600 px-4 py-2 text-center text-white",children:"ðŸŒ Buy Online"}),e.jsx("p",{className:"text-xs text-sand",children:"As an Amazon Associate, I earn from qualifying purchases. Some links on this page may be affiliate links."})]})]}),e.jsx("button",{type:"button",className:"rounded-md bg-gradient-to-r from-violet-900 to-sky-900 px-3 py-2 text-white hover:opacity-90",onClick:()=>m(a=>!a),children:"ðŸ§  Smart Explore"}),l&&h.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"mt-4 text-2xl font-bold text-sky-300",children:"Similar Herbs"}),e.jsx("ul",{className:"list-disc list-inside",children:h.map(a=>e.jsx("li",{children:e.jsx(d,{className:"text-comet underline",to:`/herbs/${a.id}`,children:a.name})},a.id))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-sky-300",children:"Your Notes"}),e.jsx("textarea",{value:s,onChange:a=>n(a.target.value),className:"mt-2 w-full rounded-md bg-black/20 p-2 text-white",rows:5})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-sky-300",children:"Community Notes"}),e.jsxs("div",{className:"rounded-md bg-black/20 p-2 text-sm text-sand",children:[e.jsx("strong",{children:"Alice"}),": Great for relaxation! ",e.jsx("span",{className:"float-right text-xs",children:"2024-05-01"})]}),e.jsxs("div",{className:"rounded-md bg-black/20 p-2 text-sm text-sand",children:[e.jsx("strong",{children:"Bob"}),": Helped with sleep. ",e.jsx("span",{className:"float-right text-xs",children:"2024-05-02"})]}),e.jsxs("form",{onSubmit:a=>{a.preventDefault();const o=a.target,N=o.elements.namedItem("note").value;console.log("Submitted note:",N),o.reset()},className:"space-y-2",children:[e.jsx("textarea",{name:"note",rows:3,className:"w-full rounded-md bg-black/20 p-2 text-white",placeholder:"Share your experience..."}),e.jsx("button",{type:"submit",className:"rounded bg-psychedelic-purple px-3 py-1 text-white hover:opacity-90",children:"Submit Note"})]})]}),e.jsxs("details",{className:"bg-slate-800/40 p-4 rounded-md",children:[e.jsx("summary",{className:"cursor-pointer text-sky-300",children:"ðŸ§¬ Summarize This Herb"}),e.jsx("p",{className:"mt-2",children:b})]})]})]})}export{P as default};
