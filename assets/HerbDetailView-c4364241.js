import{R as m,j as e,k as A,L as x,W as H,m as S}from"./main-8107ca7e.js";import{a as T,d as $,t as D}from"./herbs-8a0b8949.js";import{s as E,u as O,T as B}from"./useLocalStorage-17c46a94.js";import{s as t}from"./safeHerbField-1fbb551f.js";import{s as j}from"./slugify-386a61cd.js";function U({tabs:c}){var d;const[i,n]=m.useState(0),[s,o]=m.useState(!1);return m.useEffect(()=>{const r=()=>o(window.innerWidth<640);return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),s?e.jsx("div",{className:"space-y-4",children:c.map((r,l)=>e.jsxs("details",{open:l===i,className:"rounded-md bg-black/20 p-2",onClick:()=>n(l),children:[e.jsx("summary",{className:"cursor-pointer font-semibold",children:r.label}),e.jsx("div",{className:"mt-2",children:r.content})]},r.id))}):e.jsxs("div",{children:[e.jsx("div",{className:"flex gap-2 border-b border-comet/30",children:c.map((r,l)=>e.jsx("button",{type:"button",onClick:()=>n(l),className:`px-3 py-2 text-sm ${l===i?"border-b-2 border-sky-300 text-sky-300":"text-sand hover:text-sky-300"}`,children:r.label},r.id))}),e.jsx("div",{className:"pt-4",children:(d=c[i])==null?void 0:d.content})]})}function P(){var h,p,f;const{id:c}=A(),i=T.find(a=>a.id===c),n=E(i||{}),s={...n,name:t(n.name,"Unnamed Herb"),description:t(n.description,""),category:t(n.category,"Other"),tags:Array.isArray(n.tags)?n.tags:[],effects:Array.isArray(n.effects)?n.effects:[],slug:n.slug||j(t(n.name,""))},[o,d]=O(`notes-${c}`,""),[r,l]=m.useState(!1);if((!(i!=null&&i.name)||!(i!=null&&i.description))&&console.warn("Incomplete herb data",c,i),!i)return console.warn("Herb not found or malformed:",c),e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("p",{children:"Herb not found."}),e.jsx(x,{to:"/database",className:"text-comet underline",children:"Back to database"})]});const u=`https://thehippiescientist.net/#/herb/${s.id}`,b=async()=>{try{await navigator.clipboard.writeText(u),l(!0),setTimeout(()=>l(!1),2e3)}catch{}},y=()=>d(""),N=e.jsxs("div",{className:"space-y-2",children:[(()=>{const a=Array.isArray(s.effects)?s.effects.join(", "):s.effects||"";return a?e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-lime-300",children:"Effects:"})," ",a]}):null})(),t(s.region,"")&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-lime-300",children:"Region:"})," ",t(s.region,"")]}),s.history&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-lime-300",children:"History:"})," ",s.history]}),((h=s.tags)==null?void 0:h.length)>0&&e.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:(p=s.tags)==null?void 0:p.map(a=>e.jsx(B,{label:$(a),variant:D(a)},a))})]}),v=e.jsxs("div",{className:"space-y-2",children:[((f=s.activeConstituents)==null?void 0:f.length)>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-lime-300",children:"Compounds:"})," ",s.activeConstituents.map((a,L)=>e.jsxs(m.Fragment,{children:[L>0&&", ",e.jsx(x,{className:"text-sky-300 underline",to:`/compounds#${j(a.name)}`,children:a.name})]},a.name))]}),t(s.mechanismOfAction,"")&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-lime-300",children:"Mechanism:"})," ",t(s.mechanismOfAction,"")]}),t(s.toxicityLD50,"")&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-lime-300",children:"LD50:"})," ",t(s.toxicityLD50,"")]})]}),g=e.jsxs("div",{className:"space-y-2",children:[t(s.preparation,"")&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-lime-300",children:"Prep:"})," ",t(s.preparation,"")]}),t(s.intensity,"")&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-lime-300",children:"Intensity:"})," ",t(s.intensity,"")]}),t(s.dosage,"")&&e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-lime-300",children:"Dosage:"})," ",t(s.dosage,"")]}),s.affiliateLink&&s.affiliateLink.startsWith("http")?e.jsx("a",{href:s.affiliateLink,target:"_blank",rel:"noopener noreferrer",className:"text-sky-300 underline",children:"Buy Online"}):e.jsx("span",{className:"text-sm text-sand/60",children:"No affiliate link available."}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-sky-300",children:"Usage Log"}),e.jsx("textarea",{value:o,onChange:a=>d(a.target.value),className:"mt-2 w-full rounded-md bg-black/20 p-2 text-white",rows:5}),e.jsxs("div",{className:"flex items-center gap-4 pt-2",children:[o&&e.jsx("span",{className:"text-sm text-sand/80",children:"Saved"}),o&&e.jsx("button",{type:"button",onClick:y,className:"text-sky-300 underline",children:"Clear Notes"})]})]})]}),k=[{id:"overview",label:"Overview",content:N},{id:"chemistry",label:"Chemistry",content:v},{id:"usage",label:"Usage",content:g}],w=Array.isArray(s.effects)?s.effects.join(", "):s.effects||"",C=`${s.name} is classified as ${s.category}. Known effects include ${w}.`;return e.jsxs(e.Fragment,{children:[e.jsxs(H,{children:[e.jsxs("title",{children:[s.name," - The Hippie Scientist"]}),s.description&&e.jsx("meta",{name:"description",content:s.description})]}),e.jsxs(S.div,{initial:{opacity:0},animate:{opacity:1},className:"mx-auto max-w-3xl space-y-6 px-6 py-12",children:[e.jsx(x,{to:"/database",className:"text-comet underline",children:"‚Üê Back"}),e.jsx("h1",{className:"text-gradient text-4xl font-bold",children:s.name}),s.scientificName&&e.jsx("p",{className:"italic",children:s.scientificName}),e.jsx("button",{type:"button",onClick:b,className:"rounded-md bg-black/30 px-3 py-2 text-sm text-sand backdrop-blur-md hover:bg-white/10",children:r?"‚úÖ Copied!":"Share üîó"}),e.jsx(U,{tabs:k}),e.jsxs("details",{className:"rounded-md bg-slate-800/40 p-4",children:[e.jsx("summary",{className:"cursor-pointer text-sky-300",children:"üß¨ Summarize This Herb"}),e.jsx("p",{className:"mt-2",children:C})]})]})]})}export{P as default};
