import{l as $,R as m,j as e,n as k,m as p,r as N,L as H,W as I}from"./main-82522f27.js";import{d as j,t as O,s as A,a as D,n as C}from"./format-d7efe303.js";import{u as M,T as S,c as P}from"./useLocalStorage-8c4aacbb.js";import{S as _}from"./star-b40ce03d.js";import{h as R}from"./herbs-6a3407b6.js";import{S as V}from"./StarfieldBackground-3d1cb555.js";import{F as B}from"./fuse-11af6271.js";/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=$("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),U="Unknown",K="Not well documented";function L(){const[t,r]=M("herbFavorites",[]);return{favorites:t,toggle:c=>{r(u=>u.includes(c)?u.filter(l=>l!==c):[...u,c])},isFavorite:c=>t.includes(c)}}function W({text:t,children:r}){const[i,o]=m.useState(!1);return e.jsxs("span",{className:"relative inline-block",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),onFocus:()=>o(!0),onBlur:()=>o(!1),onTouchStart:()=>o(c=>!c),children:[r||e.jsx("span",{className:"ml-1 cursor-help select-none text-sand",children:"‚ÑπÔ∏è"}),e.jsx(k,{children:i&&e.jsx(p.div,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.2},className:"absolute left-1/2 z-50 mt-1 w-56 -translate-x-1/2 rounded-md bg-black/80 p-2 text-xs text-white backdrop-blur",children:t})})]})}const Y={Oneirogen:"blue","Dissociative / Sedative":"purple","Empathogen / Euphoriant":"pink","Ritual / Visionary":"green",Other:"yellow"},J={hidden:{},visible:{transition:{staggerChildren:.05}}},E={hidden:{opacity:0,y:10},visible:{opacity:1,y:0}},T={mechanismOfAction:"How this herb produces its effects in the body.",toxicity:"Known adverse effects or poisoning information.",therapeuticUses:"Traditional or potential healing applications.",contraindications:"Situations where this herb should be avoided."};function Q(t){const r=t.toLowerCase();return r.includes("oneirogen")?"from-indigo-700/40 to-purple-700/40":r.includes("ritual")||r.includes("visionary")?"from-green-800/40 to-blue-800/40":r.includes("stimulant")?"from-orange-700/40 to-red-700/40":"from-white/10 to-white/5"}function q(t,r){let i;if(typeof t=="number"&&(i=t),typeof t=="string"){const o=t.toLowerCase();o==="low"?i=1:o==="moderate"?i=3:o==="high"&&(i=5)}if(r&&/severe|danger/i.test(r))return"danger";if(i!=null)return i<=2?"safe":i<=4?"caution":"danger"}function G({herb:t,highlight:r=""}){var b,w;const[i,o]=N.useState(!1),c=()=>o(a=>!a),{isFavorite:u,toggle:l}=L(),f=a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),c())},g=a=>{if(!r)return a;const n=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s=new RegExp(`(${n})`,"ig");return a.replace(s,'<span class="font-bold text-yellow-300">$1</span>')},v=Q(t.category),y=q(t.safetyRating,t.toxicity);return e.jsxs(p.div,{layout:!0,initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},exit:{opacity:0,scale:.9},onClick:c,onKeyDown:f,tabIndex:0,role:"button","aria-expanded":i,whileHover:{scale:1.03,boxShadow:"0 0 20px rgba(255,255,255,0.2)",backgroundColor:"rgba(255,255,255,0.1)"},whileTap:{scale:.97},transition:{layout:{duration:.4,ease:"easeInOut"}},className:`hover-glow card-contrast relative cursor-pointer overflow-hidden rounded-2xl bg-gradient-to-br ${v} border border-white/10 p-4 shadow-lg shadow-black/50 ring-1 ring-white/30 backdrop-blur-md focus:outline-none focus-visible:ring-2 focus-visible:ring-psychedelic-pink sm:p-6`,children:[e.jsx(p.span,{initial:{opacity:0,y:-4},whileHover:{opacity:1,y:0},whileTap:{opacity:1,y:0},className:"pointer-events-none absolute right-4 top-2 text-xs text-sand",children:"+ More Info"}),e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("h3",{className:"font-herb text-xl text-white sm:text-2xl",dangerouslySetInnerHTML:{__html:g(t.name)}}),y&&e.jsx("span",{className:`ml-1 rounded-full px-2 py-0.5 text-xs font-medium shadow ${y==="safe"?"bg-green-700/40 text-green-200 ring-1 ring-green-400/60":y==="caution"?"bg-yellow-700/40 text-yellow-200 ring-1 ring-yellow-400/60":"bg-red-700/40 text-red-200 ring-1 ring-red-500/60"}`,children:y==="safe"?"‚úÖ Safe":y==="caution"?"‚ö†Ô∏è Caution":"‚ò†Ô∏è High Risk"}),t.scientificName&&e.jsx("p",{className:"text-xs italic text-sand",dangerouslySetInnerHTML:{__html:g(t.scientificName)}}),e.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-sm text-sand sm:text-base",children:[t.category&&e.jsx(S,{label:t.category,variant:Y[t.category]||"purple"}),((b=t.effects)==null?void 0:b.length)>0&&e.jsx("span",{children:t.effects.join(", ")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:a=>{a.stopPropagation(),l(t.id)},"aria-label":u(t.id)?"Remove favorite":"Add favorite",className:"rounded-md p-1 text-yellow-400 hover:bg-white/10",children:e.jsx(_,{fill:u(t.id)?"currentColor":"none",size:18})}),e.jsx(p.span,{layout:!0,initial:!1,animate:{rotate:i?90:0},transition:{duration:.3},className:"text-cyan-200 transition-transform",children:e.jsx(z,{size:18})})]})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[t.tags.slice(0,3).map(a=>e.jsx(S,{label:j(a),variant:O(a),className:i?"animate-pulse":""},a)),t.tags.length>3&&e.jsx(S,{label:`+${t.tags.length-3}`,variant:"yellow"})]}),e.jsx(k,{initial:!1,children:i&&e.jsx(p.div,{layout:!0,initial:"collapsed",animate:"open",exit:"collapsed",variants:{open:{opacity:1,height:"auto"},collapsed:{opacity:0,height:0}},transition:{duration:.4,ease:"easeInOut"},className:"mt-4 overflow-hidden whitespace-pre-line break-words text-sm text-sand sm:text-base",children:e.jsxs(p.div,{variants:J,initial:"hidden",animate:"visible",exit:"hidden",className:"space-y-3",children:[["description","mechanismOfAction","therapeuticUses","sideEffects","contraindications","drugInteractions","preparation","pharmacokinetics","onset","duration","intensity","region","legalStatus","safetyRating","toxicity","toxicityLD50"].map(a=>{const n=t[a],s=typeof n=="string"&&n.trim()&&n!=="No description provided."?n:a==="mechanismOfAction"||a==="toxicity"||a==="toxicityLD50"?U:K;return e.jsxs(p.div,{variants:E,children:[e.jsxs("span",{className:"font-semibold text-lime-300",children:[a.replace(/([A-Z])/g," $1")+":",T[a]&&e.jsx(W,{text:T[a]})]})," ",a==="safetyRating"?e.jsx("span",{className:typeof n=="number"?A(n):"",children:s}):s]},a)}),((w=t.tags)==null?void 0:w.length)>0&&e.jsx(p.div,{variants:E,className:"flex max-h-32 flex-wrap gap-2 overflow-y-auto pt-2",children:t.tags.slice(0,10).map(a=>e.jsx(S,{label:j(a),variant:O(a),className:i?"animate-pulse":""},a))}),e.jsx(p.div,{variants:E,className:"pt-2",children:e.jsx(H,{to:`/herbs/${t.id}`,onClick:a=>a.stopPropagation(),className:"text-comet underline",children:"View full page"})})]})},"content")})]})}const Z={hidden:{},visible:{transition:{staggerChildren:.05}}},X={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},ee=({herbs:t,highlightQuery:r="",batchSize:i=24})=>{const[o,c]=m.useState(i),u=()=>c(l=>Math.min(l+i,t.length));return t.length===0?e.jsx("p",{className:"text-center text-sand/80",children:"No herbs match your search."}):e.jsxs(e.Fragment,{children:[e.jsx(p.div,{layout:!0,variants:Z,initial:"hidden",animate:"visible",className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:e.jsx(k,{children:t.slice(0,o).map(l=>e.jsx(p.div,{variants:X,layout:!0,children:e.jsx(G,{herb:l,highlight:r})},l.id||l.name))})},t.map(l=>l.id).join("-")),o<t.length&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{type:"button",onClick:u,className:"rounded-md bg-black/30 px-4 py-2 text-sand hover:bg-white/10 backdrop-blur-md",children:"Show More"})})]})},te=ee,se=["Effect","Preparation","Safety","Chemistry","Region","Other"];function ae({tags:t,onChange:r,storageKey:i="tagFilters",counts:o={}}){const[c,u]=M(i,[]),[l,f]=N.useState({Effect:!0,Preparation:!1,Safety:!1,Chemistry:!1,Region:!1,Other:!1}),[g,v]=N.useState({Effect:!1,Preparation:!1,Safety:!1,Chemistry:!1,Region:!1,Other:!1});N.useEffect(()=>{r==null||r(c)},[c,r]);const y=N.useMemo(()=>{const n={Effect:[],Preparation:[],Safety:[],Chemistry:[],Region:[],Other:[]};return t.forEach(s=>{const d=D(s);n[d].push(s)}),n},[t]),b=n=>{u(s=>s.includes(n)?s.filter(d=>d!==n):[...s,n])},w=n=>{switch(n){case"Effect":return"‚ö° Effects";case"Preparation":return"üåø Preparation";case"Safety":return"‚ö†Ô∏è Safety";case"Chemistry":return"üß™ Chemistry";case"Region":return"üìç Region";default:return"‚ú® Other"}},a=n=>{const s=y[n]||[],d=12,x=g[n]?s:s.slice(0,d);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"tag-list",children:[x.map(h=>e.jsx(p.button,{type:"button",onClick:()=>b(h),whileHover:{scale:1.1},whileTap:{scale:.95},animate:{opacity:c.includes(h)?1:.6},"aria-pressed":c.includes(h),className:"flex-shrink-0 focus:outline-none",title:o[h]?`${j(C(h))} ‚Äî used in ${o[h]} herbs`:j(C(h)),children:e.jsx(S,{label:j(C(h)),variant:c.includes(h)?"green":O(h),className:P(c.includes(h)&&"ring-1 ring-emerald-400")})},h)),s.length>d&&e.jsx(p.button,{type:"button",whileHover:{scale:1.05},onClick:()=>v(h=>({...h,[n]:!h[n]})),className:"tag-pill mt-2",children:g[n]?"Show Less":"Show More"})]})})};return e.jsx("div",{className:"space-y-3",children:se.map(n=>e.jsxs("div",{className:"tag-section",children:[e.jsxs("button",{type:"button",className:"tag-label",onClick:()=>f(s=>({...s,[n]:!s[n]})),"aria-expanded":l[n],children:[w(n),e.jsx(p.span,{animate:{rotate:l[n]?90:0},className:"ml-1 text-xs",children:"‚ñ∂"})]}),e.jsx(k,{initial:!1,children:l[n]&&e.jsx(p.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},children:a(n)},"content")})]},n))})}function ie(){const t=m.useMemo(()=>{const i={};return R.forEach(o=>{const c=o.category.split("/")[0].trim();i[c]=(i[c]||0)+1}),i},[]),r=Math.max(...Object.values(t));return e.jsx("div",{className:"space-y-2",children:Object.entries(t).map(([i,o])=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-40 text-sm",children:i}),e.jsx("div",{className:"flex-1 bg-slate-700/50 h-2 rounded",children:e.jsx("div",{className:"h-2 rounded bg-fuchsia-500",style:{width:`${o/r*100}%`}})}),e.jsx("span",{className:"text-sm",children:o})]},i))})}function ne(){const[t]=m.useState(R);return t}function re({query:t,setQuery:r,fuse:i}){const[o,c]=m.useState([]);m.useEffect(()=>{const l=t.trim();c(l?i.search(l,{limit:5}):[])},[t,i]);const u=l=>{if(!t)return l;const f=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),g=new RegExp(`(${f})`,"ig");return l.replace(g,'<span class="font-bold">$1</span>')};return e.jsxs("div",{className:"relative w-full",children:[e.jsx("input",{type:"text",placeholder:"Search herbs...",value:t,onChange:l=>r(l.target.value),className:"w-full rounded-md bg-space-dark/70 px-3 py-2 text-white backdrop-blur-md focus:outline-none"}),o.length>0&&e.jsx("ul",{className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-black/80 p-2 text-sm text-sand backdrop-blur-md",children:o.map(l=>e.jsx("li",{children:e.jsx("button",{type:"button",className:"w-full text-left hover:bg-white/10 px-2 py-1 rounded",onClick:()=>r(l.item.name),dangerouslySetInnerHTML:{__html:u(l.item.name)}})},l.item.id))})]})}function oe(t,r={}){const{favorites:i=[]}=r,[o,c]=m.useState(""),[u,l]=m.useState([]),[f,g]=m.useState(!1),[v,y]=m.useState(""),b=m.useMemo(()=>new B(t,{keys:["name","scientificName","effects","description","tags"],threshold:.4,includeMatches:!0}),[t]);return{filtered:m.useMemo(()=>{let a=t;const n=o.trim();return n&&(a=b.search(n).map(s=>s.item)),u.length&&(a=a.filter(s=>u.every(d=>s.tags.includes(d)))),f&&(a=a.filter(s=>i.includes(s.id))),v==="name"&&(a=[...a].sort((s,d)=>s.name.localeCompare(d.name))),a},[t,o,u,f,i,v,b]),query:o,setQuery:c,tags:u,setTags:l,favoritesOnly:f,setFavoritesOnly:g,sort:v,setSort:y,fuse:b}}function le(t,r){try{const i=localStorage.getItem(t);return i?JSON.parse(i):r}catch{return r}}function F(t,r){try{localStorage.setItem(t,JSON.stringify(r))}catch{}}function fe(){const t=ne(),{favorites:r}=L(),{filtered:i,query:o,setQuery:c,tags:u,setTags:l,favoritesOnly:f,setFavoritesOnly:g,fuse:v}=oe(t,{favorites:r});m.useEffect(()=>{const s=le("dbScroll",0);s&&window.scrollTo(0,s);const d=()=>F("dbScroll",window.scrollY);return window.addEventListener("scroll",d),()=>{F("dbScroll",window.scrollY),window.removeEventListener("scroll",d)}},[]);const y=m.useMemo(()=>{const s=t.reduce((d,x)=>d.concat(x.tags),[]);return Array.from(new Set(s))},[t]),b=m.useMemo(()=>{const s={};return t.forEach(d=>{d.tags.forEach(x=>{s[x]=(s[x]||0)+1})}),s},[t]),[w,a]=m.useState(!1),n=m.useMemo(()=>{if(u.length===0)return[];const s={};return t.forEach(d=>{u.every(x=>d.tags.includes(x))&&d.tags.forEach(x=>{u.includes(x)||(s[x]=(s[x]||0)+1)})}),Object.entries(s).sort((d,x)=>x[1]-d[1]).slice(0,5).map(([d])=>d)},[u,t]);return e.jsxs(e.Fragment,{children:[e.jsxs(I,{children:[e.jsx("title",{children:"Database - The Hippie Scientist"}),e.jsx("meta",{name:"description",content:"Browse herbal entries and expand each to learn more about their effects and usage."})]}),e.jsxs("div",{className:"relative min-h-screen px-4 pt-20",children:[e.jsx(V,{}),e.jsxs("div",{className:"relative mx-auto max-w-6xl",children:[e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"mb-8 text-center",children:[e.jsx("h1",{className:"text-gradient mb-6 text-5xl font-bold",children:"Herb Database"}),e.jsx("p",{className:"mx-auto max-w-4xl text-xl text-gray-300",children:"Explore our collection of herbs. Click any entry to see detailed information."})]}),e.jsxs("div",{className:"sticky top-2 z-20 mb-4 flex flex-wrap items-center gap-2",children:[e.jsx(re,{query:o,setQuery:c,fuse:v}),e.jsx("button",{type:"button",onClick:()=>g(s=>!s),className:"rounded-md bg-space-dark/70 px-3 py-2 text-sm text-yellow-300 backdrop-blur-md hover:bg-white/10",children:f?"All Herbs":"My Herbs"}),e.jsx("button",{type:"button",onClick:()=>a(s=>!s),className:"rounded-md bg-space-dark/70 px-3 py-2 text-sm text-sand backdrop-blur-md hover:bg-white/10 sm:hidden",children:w?"Hide Filters":"Show Filters"})]}),e.jsx("div",{className:`mb-4 ${w?"":"hidden sm:block"}`,children:e.jsx(ae,{tags:y,counts:b,onChange:l})}),n.length>0&&e.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"text-sm text-moss",children:"Related tags:"}),n.map(s=>e.jsx("button",{type:"button",onClick:()=>l(d=>Array.from(new Set([...d,s]))),className:"tag-pill",children:j(s)},s))]}),e.jsx(ie,{}),e.jsx(te,{herbs:i,highlightQuery:o})]})]})]})}export{fe as default};
