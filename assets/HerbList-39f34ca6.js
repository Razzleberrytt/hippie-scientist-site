import{l as L,r as b,p as E,j as e,m as c,A as j,R}from"./main-a00c7e15.js";import{d as w,t as $}from"./format-5969a492.js";import{T as x,t as M}from"./TagBadge-b2a65bfc.js";import{u as N}from"./useLocalStorage-af83fb78.js";import"./compoundData-4198ca33.js";import{S as F}from"./star-ac0ac748.js";/**
 * @license lucide-react v0.298.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=L("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function _(){const[t,a]=N("favorites",[]);return{favorites:t,toggle:r=>{a(l=>l.includes(r)?l.filter(s=>s!==r):[...l,r])},isFavorite:r=>t.includes(r)}}function O(){try{return localStorage.getItem("isAdmin")==="true"}catch{return!1}}const V={Oneirogen:"blue","Dissociative / Sedative":"purple","Empathogen / Euphoriant":"pink","Ritual / Visionary":"green",Other:"yellow"},p=3;function D(t){const a=t.toLowerCase();return a.includes("oneirogen")?"from-indigo-700/40 to-purple-700/40":a.includes("ritual")||a.includes("visionary")?"from-green-800/40 to-blue-800/40":a.includes("stimulant")?"from-orange-700/40 to-red-700/40":"from-white/10 to-white/5"}function P(t,a){let n;if(typeof t=="number"&&(n=t),typeof t=="string"){const o=t.toLowerCase();o==="low"?n=1:o==="moderate"?n=3:o==="high"&&(n=5)}if(a&&/severe|danger/i.test(a))return"danger";if(n!=null)return n<=2?"safe":n<=4?"caution":"danger"}function z({herb:t,highlight:a=""}){var v;const[n,o]=b.useState(!1),[r,l]=b.useState(!1),[s,k]=N(`tags-${t.id}`,t.tags),C=E(),f=!1,h=()=>{localStorage.setItem("focusHerb",t.id),C(`/herb/${t.id}`)},{isFavorite:y,toggle:T}=_(),S=i=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),h())},m=i=>{if(!a)return i;const g=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),u=new RegExp(`(${g})`,"ig");return i.replace(u,'<mark class="rounded bg-yellow-500/40 px-1">$1</mark>')},H=D(t.category),d=P(t.safetyRating,t.toxicity);return e.jsxs(c.div,{id:t.id,layout:!0,initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},exit:{opacity:0,scale:.9},onClick:h,onKeyDown:S,tabIndex:0,role:"button","aria-expanded":f,whileHover:{scale:1.03,boxShadow:"0 0 20px rgba(255,255,255,0.2)",backgroundColor:"rgba(255,255,255,0.1)"},whileTap:{scale:.97},transition:{layout:{duration:.4,ease:"easeInOut"}},className:`hover-glow card-contrast relative cursor-pointer overflow-hidden rounded-2xl bg-gradient-to-br ${H} border border-white/10 p-4 shadow-lg shadow-black/50 ring-1 ring-white/30 backdrop-blur-lg hover:shadow-psychedelic-pink/40 hover:drop-shadow-2xl focus:outline-none focus-visible:shadow-intense focus-visible:ring-2 focus-visible:ring-psychedelic-pink sm:p-6`,children:[e.jsx(c.span,{initial:{opacity:0,y:-4},whileHover:{opacity:1,y:0},whileTap:{opacity:1,y:0},className:"pointer-events-none absolute right-4 top-2 text-xs text-sand",children:"+ More Info"}),e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-baseline gap-1",children:[e.jsx("h3",{className:"text-shadow mb-0.5 font-herb text-xl text-white sm:text-2xl",dangerouslySetInnerHTML:{__html:m(t.name)}}),d&&e.jsx("span",{className:`rounded-full px-2 py-0.5 text-xs font-medium shadow ${d==="safe"?"bg-green-700/40 text-green-200 ring-1 ring-green-400/60":d==="caution"?"bg-yellow-700/40 text-yellow-200 ring-1 ring-yellow-400/60":"bg-red-700/40 text-red-200 ring-1 ring-red-500/60"}`,children:d==="safe"?"✅ Safe":d==="caution"?"⚠️ Caution":"☠️ High Risk"})]}),t.scientificName&&e.jsx("p",{className:"mt-0.5 text-xs italic text-sand",dangerouslySetInnerHTML:{__html:m(t.scientificName)}}),e.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-sm text-sand sm:text-base",children:[t.category&&e.jsx(x,{label:t.category,variant:V[t.category]||"purple"}),((v=t.effects)==null?void 0:v.length)>0&&e.jsx("span",{dangerouslySetInnerHTML:{__html:m(t.effects.join(", "))}})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",onClick:i=>{i.stopPropagation(),T(t.id)},"aria-label":y(t.id)?"Remove favorite":"Add favorite",className:"rounded-md p-1 text-yellow-400 hover:bg-white/10",children:e.jsx(F,{fill:y(t.id)?"currentColor":"none",size:18})}),e.jsx(c.span,{layout:!0,initial:!1,animate:{rotate:0},transition:{duration:.3},className:"text-cyan-200 transition-transform",children:e.jsx(A,{size:18})})]})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[(n||s.length<=p?s:s.slice(0,p)).map(i=>e.jsx(x,{label:w(i),variant:$(i),className:""},i)),s.length>p&&e.jsx("button",{type:"button",onClick:i=>{i.stopPropagation(),o(g=>!g)},className:"focus:outline-none",children:e.jsx(x,{label:n?"Show Less":`+${s.length-p} more`,variant:"yellow"})})]}),e.jsx(j,{initial:!1,children:f}),O()&&r&&e.jsx(c.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur",children:e.jsxs(c.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"max-h-[80vh] overflow-y-auto rounded-md bg-midnight p-4 text-white",children:[e.jsx("h3",{className:"mb-2 text-lg font-bold",children:"Edit Tags"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.keys(M).map(i=>e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:s.includes(i),onChange:g=>k(u=>g.target.checked?[...u,i]:u.filter(I=>I!==i)),className:"rounded focus-visible:ring-2 focus-visible:ring-psychedelic-pink"}),w(i)]},i))}),e.jsx("div",{className:"mt-4 text-right",children:e.jsx("button",{type:"button",onClick:()=>{console.log("Updated tags",s),l(!1)},className:"rounded bg-psychedelic-purple px-3 py-1",children:"Save"})})]})})]})}const K={hidden:{},visible:{transition:{staggerChildren:.05}}},q={hidden:{opacity:0,y:20},visible:{opacity:1,y:0},exit:{opacity:0,y:-20}},B=({herbs:t,highlightQuery:a="",batchSize:n=24})=>{const[o,r]=R.useState(n),l=()=>r(s=>Math.min(s+n,t.length));return t.length===0?e.jsx("p",{className:"text-center text-sand/80",children:"No herbs match your search."}):e.jsxs(e.Fragment,{children:[e.jsx(c.div,{layout:!0,variants:K,initial:"hidden",animate:"visible",className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3",children:e.jsx(j,{children:t.slice(0,o).map(s=>e.jsx(c.div,{variants:q,layout:!0,exit:"exit",children:e.jsx(z,{herb:s,highlight:a})},s.id||s.name))})},t.map(s=>s.id).join("-")),o<t.length&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{type:"button",onClick:l,className:"rounded-md bg-black/30 px-4 py-2 text-sand hover:bg-white/10 backdrop-blur-md",children:"Show More"})})]})},Y=B;export{Y as H,_ as u};
