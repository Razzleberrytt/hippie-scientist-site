import{R as l,j as e,T as g,l as M,p as B,W as k,m as f,A,H}from"./main-1c05fd05.js";import{u as T}from"./useHerbs-d9eeecda.js";function L(n){if(n.length===0)return"Your Custom Blend";const r=n.map(c=>(c.name||"").split(" ")[0]).filter(Boolean);return r.length?r.join(" ")+" Fusion":"Your Custom Blend"}function R(n){if(!n.length)return"Select herbs to see a summary of the blend.";const r=n.map(a=>a.name).join(", "),c=Array.from(new Set(n.flatMap(a=>a.effects||[]))).join(", ");return`Combines ${r} for effects including ${c}.`}function E({herbs:n,onSave:r}){const c=l.useMemo(()=>L(n),[n]),a=l.useMemo(()=>R(n),[n]),m=l.useMemo(()=>Array.from(new Set(n.flatMap(i=>i.tags||[]))),[n]);return e.jsxs("div",{className:"soft-border-glow bg-psychedelic-gradient/30 rounded-xl p-4 text-white backdrop-blur-md",children:[e.jsx("h2",{className:"mb-2 text-2xl font-bold",children:c}),e.jsx("p",{className:"mb-2 text-sand",children:a}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:m.map(i=>e.jsx(g,{label:i},i))}),n.length>=2&&e.jsx("button",{type:"button",onClick:r,className:"rounded-md bg-space-dark/70 px-3 py-1 text-sm text-sand backdrop-blur-md hover:bg-white/10",children:"Save Blend"})]})}function $(){const{herbs:n,loading:r,error:c}=T(),[a,m]=l.useState(""),[i,p]=l.useState([]),[z,j]=M("savedBlends",[]);if(r)return e.jsx(B,{});if(c)return e.jsx("div",{className:"min-h-screen px-4 pt-20 text-center",children:e.jsx("p",{className:"text-red-500",children:"Failed to load herb data."})});const b=()=>{const t=n.find(o=>o.name.toLowerCase()===a.toLowerCase()||o.id===a);t&&!i.includes(t.id)&&i.length<5&&p(o=>[...o,t.id]),m("")},y=t=>p(o=>o.filter(d=>d!==t)),v=()=>p([]),w=()=>{const t=n.map(x=>x.id),o=Math.floor(Math.random()*4)+2,d=[];for(;d.length<o&&t.length;){const x=Math.floor(Math.random()*t.length);d.push(t.splice(x,1)[0])}p(d)},s=n.filter(t=>i.includes(t.id)),N=()=>{s.length>=2&&j(t=>[...t,i])},u=l.useMemo(()=>Array.from(new Set(s.flatMap(t=>t.effects||[]))),[s]),h=l.useMemo(()=>Array.from(new Set(s.flatMap(t=>t.tags||[]))),[s]),C=l.useMemo(()=>Array.from(new Set(s.map(t=>t.category))),[s]),S=l.useMemo(()=>s.map(t=>t.contraindications).filter(Boolean).join(" "),[s]);return e.jsxs("div",{className:"relative min-h-screen px-4 pt-20",children:[e.jsxs(k,{children:[e.jsx("title",{children:"Blend Builder - The Hippie Scientist"}),e.jsx("meta",{name:"description",content:"Create custom herbal blends."})]}),e.jsxs("div",{className:"mx-auto max-w-6xl space-y-6",children:[e.jsx(f.h1,{className:"text-gradient text-center text-5xl font-bold",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},children:"Herb Blend Builder"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("input",{list:"herb-list",value:a,onChange:t=>m(t.target.value),placeholder:"Type herb name",className:"rounded-md bg-space-dark/70 px-3 py-2 text-white backdrop-blur-md focus:outline-none"}),e.jsx("datalist",{id:"herb-list",children:n.map(t=>e.jsx("option",{value:t.name},t.id))}),e.jsx("button",{type:"button",onClick:b,className:"tag-pill hover-glow bg-emerald-700/70 text-white",children:"Add Herb"}),e.jsx("button",{type:"button",onClick:v,className:"tag-pill hover-glow bg-rose-700/70 text-white",children:"Clear"}),e.jsx("button",{type:"button",onClick:w,className:"tag-pill hover-glow bg-sky-700/70 text-white",children:"Randomize"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(t=>e.jsx("button",{type:"button",onClick:()=>y(t.id),className:"tag-pill ring-2 ring-emerald-400",children:t.name},t.id))}),e.jsx(E,{herbs:s,onSave:N}),u.length>0&&e.jsxs("div",{className:"space-y-1 text-sand",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Effects:"})," ",u.join(", ")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Categories:"})," ",C.join(", ")]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Contraindications:"})," ",S||"None"]}),h.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:h.map(t=>e.jsx(g,{label:t},t))})]}),e.jsx(A,{children:s.map(t=>e.jsx(f.div,{layout:!0,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:e.jsx(H,{herb:t})},t.id))})]})]})}export{$ as default};
