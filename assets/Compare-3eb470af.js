import{j as e,o as A,W as v,R as i,L as k}from"./main-2d26acd2.js";import{u as M,b as P}from"./compoundData-5f423ee5.js";import{T as y}from"./TagBadge-8210dfa6.js";import{d as w}from"./format-b20dbf99.js";import{s as x}from"./slugify-386a61cd.js";function u({title:m,link:h,image:d,price:p}){return e.jsxs("a",{href:h,target:"_blank",rel:"noopener noreferrer",className:"flex w-40 flex-col overflow-hidden rounded-lg bg-black/30 backdrop-blur transition hover:shadow-glow",children:[d&&e.jsx("img",{src:d,alt:m,className:"h-24 w-full object-cover"}),e.jsxs("div",{className:"p-2 text-center",children:[e.jsx("h3",{className:"text-sm font-bold text-white",children:m}),p&&e.jsx("p",{className:"text-xs text-sand",children:p}),e.jsx("span",{className:"mt-2 inline-block rounded-md bg-gradient-to-r from-green-700 to-lime-600 px-2 py-1 text-xs text-white",children:"Buy Now"})]})]})}const B={"acacia-confusa":[{title:"Acacia Root Bark 100g",link:"https://example.com/acacia",image:"https://via.placeholder.com/150",price:"$20-30"},{title:"Acacia Powder 1lb",link:"https://example.com/acacia2",image:"https://via.placeholder.com/150",price:"$45-55"}],dmt:[{title:"DMT Reference Material",link:"https://example.com/dmt",image:"https://via.placeholder.com/150",price:"$50+"},{title:"Portable Vapor Kit",link:"https://example.com/dmt-vape",image:"https://via.placeholder.com/150",price:"$80-120"}]};function E(){const[m]=A(),h=m.get("herbs"),d=m.get("compounds"),p=h?h.split(",").map(s=>s.trim()):[],b=d?d.split(",").map(s=>s.trim()):[],r=M();if(r===void 0)return e.jsxs("div",{className:"min-h-screen px-4 pt-20 text-center text-sand",children:[e.jsx(v,{children:e.jsx("title",{children:"Compare - The Hippie Scientist"})}),e.jsx("p",{children:"Loading herb data…"})]});const j=i.useMemo(()=>r?p.map(s=>r.find(t=>t.id===s)).filter(Boolean):[],[p,r]),g=i.useMemo(()=>b.map(s=>P.find(t=>x(t.name)===x(s))).filter(Boolean),[b]),f=i.useMemo(()=>[...j.map(s=>({type:"herb",herb:s})),...g.map(s=>({type:"compound",compound:s}))],[j,g]),C=i.useMemo(()=>[{label:"Name",value:s=>{var t,a;return s.type==="herb"?(t=s.herb)==null?void 0:t.name:(a=s.compound)==null?void 0:a.name}},{label:"Effects",value:s=>{var t,a;return s.type==="herb"?(((t=s.herb)==null?void 0:t.effects)||[]).join(", "):(((a=s.compound)==null?void 0:a.tags)||[]).join(", ")}},{label:"Safety",value:s=>{var t;return s.type==="herb"?((t=s.herb)==null?void 0:t.safetyRating)??"":""}},{label:"Active Constituents",value:s=>{var t,a;return s.type==="herb"?(((t=s.herb)==null?void 0:t.activeConstituents)||[]).map(c=>c.name).join(", "):(((a=s.compound)==null?void 0:a.sourceHerbs)||[]).map(c=>{var n;return((n=r==null?void 0:r.find(l=>l.id===c))==null?void 0:n.name)||c}).join(", ")}}],[r]),N=s=>B[s]||[],L=s=>{var t;if(s.type==="herb"&&s.herb){const a=s.herb,c=N(a.id);return e.jsxs("div",{className:"glass-card flex min-w-[260px] flex-col gap-2 p-4",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:a.name}),a.tags&&e.jsx("div",{className:"flex flex-wrap gap-1",children:a.tags.map(n=>e.jsx(y,{label:w(n)},n))}),a.effects&&e.jsxs("p",{className:"text-xs text-sand",children:["Effects: ",a.effects.join(", ")]}),a.mechanismOfAction&&e.jsxs("p",{className:"text-xs text-sand",children:["MOA: ",a.mechanismOfAction]}),a.preparation&&e.jsxs("p",{className:"text-xs text-sand",children:["Prep: ",a.preparation]}),a.safetyRating&&e.jsxs("p",{className:"text-xs text-sand",children:["Safety: ",a.safetyRating]}),((t=a.activeConstituents)==null?void 0:t.length)>0&&e.jsxs("p",{className:"text-xs text-sand",children:["Compounds:"," ",a.activeConstituents.map((n,l)=>e.jsxs(i.Fragment,{children:[l>0&&", ",e.jsx(k,{to:`/compounds?compound=${x(n.name)}`,className:"underline",children:n.name})]},n.name))]}),e.jsxs("div",{className:"mt-auto flex gap-2 overflow-x-auto pb-1",children:[a.affiliateLink&&e.jsx(u,{title:a.name,link:a.affiliateLink}),c.map(n=>e.jsx(u,{...n},n.link))]})]},a.id)}if(s.type==="compound"&&s.compound){const a=s.compound,c=x(a.name),n=N(c);return e.jsxs("div",{className:"glass-card flex min-w-[260px] flex-col gap-2 p-4",children:[e.jsx("h2",{className:"text-lg font-bold text-white",children:a.name}),a.tags&&e.jsx("div",{className:"flex flex-wrap gap-1",children:a.tags.map(l=>e.jsx(y,{label:w(l)},l))}),a.mechanism&&e.jsxs("p",{className:"text-xs text-sand",children:["MOA: ",a.mechanism]}),a.sourceHerbs&&a.sourceHerbs.length>0&&e.jsxs("p",{className:"text-xs text-sand",children:["Herbs:"," ",a.sourceHerbs.map((l,H)=>{const o=r==null?void 0:r.find(R=>R.id===l);return e.jsxs(i.Fragment,{children:[H>0&&", ",o?e.jsx(k,{to:`/herbs/${o.id}`,className:"underline",children:o.name}):l,(o==null?void 0:o.affiliateLink)&&e.jsx("a",{href:o.affiliateLink,target:"_blank",rel:"noopener noreferrer",className:"ml-1 text-sky-300 underline",children:"Buy Herb"})]},l)})]}),e.jsxs("div",{className:"mt-auto flex gap-2 overflow-x-auto pb-1",children:[a.affiliateLink&&e.jsx(u,{title:a.name,link:a.affiliateLink}),n.map(l=>e.jsx(u,{...l},l.link))]})]},a.name)}return null};return e.jsxs(e.Fragment,{children:[e.jsx(v,{children:e.jsx("title",{children:"Compare - The Hippie Scientist"})}),e.jsxs("div",{className:"min-h-screen px-4 pt-20",children:[e.jsx("h1",{className:"text-gradient mb-6 text-center text-5xl font-bold",children:"Comparison"}),f.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"glass-card w-full table-auto text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-2 text-left",children:"Field"}),f.map(s=>e.jsx("th",{className:"p-2 text-left",children:s.type==="herb"?s.herb.name:s.compound.name},s.type==="herb"?s.herb.id:x(s.compound.name)))]})}),e.jsx("tbody",{children:C.map(s=>e.jsxs("tr",{className:"border-t border-white/20",children:[e.jsx("td",{className:"p-2 font-semibold text-lime-300",children:s.label}),f.map(t=>e.jsx("td",{className:"p-2",children:s.value(t)||"—"},s.label+(t.type==="herb"?t.herb.id:t.compound.name)))]},s.label))})]})}),e.jsx("h2",{className:"mt-6 text-xl font-bold text-white",children:"Products"}),e.jsx("div",{className:"mt-2 grid gap-4 sm:grid-cols-2 md:grid-cols-3",children:f.map(L)})]}):e.jsx("p",{className:"text-sand",children:"Add ?herbs=id1,id2 or ?compounds=name1,name2"})]})]})}export{E as default};
